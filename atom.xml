<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[halfcrazy在疯言疯语]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://halfcrazy.me/"/>
  <updated>2015-03-16T09:00:34.000Z</updated>
  <id>http://halfcrazy.me/</id>
  
  <author>
    <name><![CDATA[halfcrazy]]></name>
    <email><![CDATA[hackzhuyan@gmail.com]]></email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[python中的装饰器]]></title>
    <link href="http://halfcrazy.me/2015/03/16/python%E4%B8%AD%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    <id>http://halfcrazy.me/2015/03/16/python中的装饰器/</id>
    <published>2015-03-16T04:43:33.000Z</published>
    <updated>2015-03-16T09:00:34.000Z</updated>
    <content type="html"><![CDATA[<p>在python中有一种动态修改函数的机制，叫做<strong>装饰器</strong>。<br>先上一个小例子<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="decorator">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plus</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(fn)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> args</span><br><span class="line">        fn(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure></p>
<p>这里定义了一个<code>plus</code>函数，它接收两个参数并返回两个参数相加的结果。又定义了一个函数<code>log</code>，它接收一个函数做参数，并且先输出该函数的参数列表，再执行该函数。这里的<code>log</code>就起到了装饰器的作用。</p>
<p>下面来解释一下装饰器的行为</p>
<p>这里的<code>@log</code>实际起到的作用相当于<code>plus = log(plus)</code>即，修改plus本身变成一个新的函数。再往下展开一次就变成了<code>plus = log(plus) = wrapper</code>。所以我们现在来看<code>wrapper</code>函数的参数，这里的<code>*args,**kwargs</code>实际就是被装饰函数的参数列表。</p>
<p>值得注意的是，对函数应用装饰器后，由于函数实质上是变成了一个新的函数，所以函数的部分属性会发送更改，比如<code>__name__</code>，如果说是专门为了保存原函数的这个属性，在新函数内部单独写上属性拷贝语句那就太不pythonic了。python为我们提供了<code>functools.wraps</code>方法。对于上面的例子，我们只需进行一行改写就可以保存原函数的属性。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(fn)</span>:</span></span><br><span class="line">    <span class="decorator">@functools.wraps(fn)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> args</span><br><span class="line">        fn(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line">    </span><br><span class="line"><span class="decorator">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plus</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br></pre></td></tr></table></figure></p>
<p>是不是很简单。</p>
<hr>
<p>接下来说一说<strong>带参数的装饰器</strong></p>
<p>还是以上面的例子为例，如果我们现在不止是希望<code>plus</code>在调用时可以输出参数，并且希望它能加上一个限制条件，只输出符合限制条件的参数。那么我们就可以对装饰器进行修改，调整现在<code>log</code>的行为。</p>
<p>如果希望加上<code>@log(5)</code>可以使<code>plus</code>只输出大于5的参数，并返回结果，那么可以按照下面的写法来。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(num)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(fn)</span>:</span></span><br><span class="line">        <span class="decorator">@functools.wraps(fn)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">            <span class="keyword">print</span> [x <span class="keyword">for</span> x <span class="keyword">in</span> args <span class="keyword">if</span> x &gt; num]</span><br><span class="line">            fn(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line">    </span><br><span class="line"><span class="decorator">@log(5)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plus</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>在python中有一种动态修改函数的机制，叫做<strong>装饰器</strong>。<br>先上一个小例子<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span clas]]>
    </summary>
    
      <category term="decorator" scheme="http://halfcrazy.me/tags/decorator/"/>
    
      <category term="python" scheme="http://halfcrazy.me/tags/python/"/>
    
      <category term="技巧" scheme="http://halfcrazy.me/categories/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Privoxy将socks5代理转http代理]]></title>
    <link href="http://halfcrazy.me/2015/03/11/%E4%BD%BF%E7%94%A8Privoxy%E5%B0%86socks5%E4%BB%A3%E7%90%86%E8%BD%AChttp%E4%BB%A3%E7%90%86/"/>
    <id>http://halfcrazy.me/2015/03/11/使用Privoxy将socks5代理转http代理/</id>
    <published>2015-03-11T09:30:05.000Z</published>
    <updated>2015-03-11T09:39:08.000Z</updated>
    <content type="html"><![CDATA[<p>由于某些特殊需要，需要将socks5代理转换成http代理，找到的工具是<a href="http://www.privoxy.org" target="_blank" rel="external">Privoxy</a></p>
<p>操作步骤很简单，安装好后找到安装目录下的config.txt</p>
<p>编辑其中的两行</p>
<p>其中 <code>listen-address 127.0.0.1:8118</code> 这一行是指出转成http代理后本地的代理ip和端口，这行默认不带注释，可以留着默认配置</p>
<p>还有一行没有，需要手动添加 <code>forward-socks5 / 127.0.0.1:9050 .</code> 这里需要注意的是不要丢掉行尾的<code>.</code>句号</p>
<p>现在配置完成，打开Privoxy即可使用本地的http代理了。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>由于某些特殊需要，需要将socks5代理转换成http代理，找到的工具是<a href="http://www.privoxy.org" target="_blank" rel="external">Privoxy</a></p>
<p>操作步骤很简单，安装好后找到安装目录]]>
    </summary>
    
      <category term="Privoxy" scheme="http://halfcrazy.me/tags/Privoxy/"/>
    
      <category term="代理" scheme="http://halfcrazy.me/tags/%E4%BB%A3%E7%90%86/"/>
    
      <category term="工具" scheme="http://halfcrazy.me/categories/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[url中的大小写]]></title>
    <link href="http://halfcrazy.me/2015/03/11/URI%E4%B8%AD%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99/"/>
    <id>http://halfcrazy.me/2015/03/11/URI中的大小写/</id>
    <published>2015-03-11T09:30:05.000Z</published>
    <updated>2015-03-16T08:09:52.000Z</updated>
    <content type="html"><![CDATA[<p>title: URI中的大小写<br>date: 2015-03-11 17:30:05<br>tags: </p>
<ul>
<li>网络</li>
<li>web<br>categories: 杂谈</li>
</ul>
<hr>
<p>统一资源定位符的标准格式如下：</p>
<blockquote>
<p>协议类型://服务器地址（必要时需加上端口号）/路径/文件名</p>
</blockquote>
<p>其中协议名，和服务器地址不大小写敏感的。也就是说<br><a href="http://www.douban.com" target="_blank" rel="external">http://www.douban.com</a> 和 hTTp://WwW.DOUBAn.CoM 是访问到的一个地址。因为dns不区分大小写。</p>
<p>接着是路径名，路径名是否大小写敏感取决于服务器的设置，一般是看具体框架的路由是不是大小写敏感，也有的是可以认为设置。</p>
<p>再然后是文件名，文件名取决于操作系统和服务器设置，如果是直接映射到系统文件目录的话，那么要看操作系统。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>title: URI中的大小写<br>date: 2015-03-11 17:30:05<br>tags: </p>
<ul>
<li>网络</li>
<li>web<br>categories: 杂谈</li>
</ul>
<hr>
<p>统一资源定位符的标准格式如下：<]]>
    </summary>
    
      <category term="web" scheme="http://halfcrazy.me/tags/web/"/>
    
      <category term="网络" scheme="http://halfcrazy.me/tags/%E7%BD%91%E7%BB%9C/"/>
    
      <category term="杂谈" scheme="http://halfcrazy.me/categories/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[git忽略vim临时文件]]></title>
    <link href="http://halfcrazy.me/2015/02/08/git%E5%BF%BD%E7%95%A5vim%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6/"/>
    <id>http://halfcrazy.me/2015/02/08/git忽略vim临时文件/</id>
    <published>2015-02-08T15:29:31.000Z</published>
    <updated>2015-02-08T15:42:27.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>参考链接<a href="http://stackoverflow.com/questions/4824188/git-ignore-vim-temporary-files" target="_blank" rel="external">git忽略vim临时文件</a></p>
</blockquote>
<p>在使用git时，由于vim每当保存文件就会在当前目录下生成一个<code>文件名~</code>的临时文件，往往会导致<code>git add .</code>命令自动把这个临时文件也包含进去。通常应对这个问题的办法是使用一个<code>.gitignore</code>的文件来设定一个规则从而忽略这些文件。不过通常的<code>.gitignore</code>模板中大多是一些ide(idea，eclipse之流)的项目文件夹，或者中间文件(.pyc之类)。</p>
<p>由于vim经常会被用来写一些不同语言/项目的代码，如果针对这些每一种语言/项目的<code>.gitignore</code>模板都添加<code>*~</code>这一行未免过于麻烦，这时有一种通用的解决办法</p>
<blockquote>
<p><code>git config --global core.excludesfile ~/.gitignore</code>命令会全局的忽略包含在<code>.gitignore</code>中的文件/文件夹。</p>
</blockquote>
<p>这样，将那些通用的规则写在这里，再对不同的语言/项目应用它们独自的<code>.gitignore</code>模板就会省事的多。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>参考链接<a href="http://stackoverflow.com/questions/4824188/git-ignore-vim-temporary-files" target="_blank" rel="external">git忽略]]>
    </summary>
    
      <category term="git" scheme="http://halfcrazy.me/tags/git/"/>
    
      <category term="vim" scheme="http://halfcrazy.me/tags/vim/"/>
    
      <category term="tricks" scheme="http://halfcrazy.me/categories/tricks/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[理解CSRF(跨站请求伪造)]]></title>
    <link href="http://halfcrazy.me/2015/02/03/%E7%90%86%E8%A7%A3CSRF/"/>
    <id>http://halfcrazy.me/2015/02/03/理解CSRF/</id>
    <published>2015-02-03T07:17:39.000Z</published>
    <updated>2015-02-03T07:23:11.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原文出处<a href="https://github.com/pillarjs/understanding-csrf" target="_blank" rel="external">Understanding CSRF</a></p>
</blockquote>
<p>对于Express团队的<a href="https://github.com/pillarjs/csurf" target="_blank" rel="external">csrf</a>模块有一些关注，尤其是围绕着如何安全的生成token。<br>这些关注是莫须有的，因为他们不了解CSRF token是如何工作的。<br>下面快速过一遍！</p>
<p>读过后还有疑问？希望告诉我们错误？请开一个issue！</p>
<h2 id="一个CSRF攻击是如何工作的？">一个CSRF攻击是如何工作的？</h2><p>在他们的钓鱼站点，攻击者可以针对你的网站创建一个请求通过创建一个AJAX按钮或者表单：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"https://my.site.com/me/something-destructive"</span> <span class="attribute">method</span>=<span class="value">"POST"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">type</span>=<span class="value">"submit"</span>&gt;</span>Click here for free money!<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是很危险的，因为攻击者可以使用其他http方法例如 <code>delete</code> 来获取结果。<br>这在用户的session中有很多关于你的网站的详细信息时是相当危险的。如果一个不懂技术的用户遇到了，他们就有可能会输入信用卡号或者个人安全信息。</p>
<h2 id="如果减轻CSRF攻击？">如果减轻CSRF攻击？</h2><h3 id="禁用CORS">禁用CORS</h3><p>第一种减轻CSRF攻击的方法是禁用cross-origin requests(跨域请求)。<br>不要允许跨域请求!<br>如果你希望允许跨域请求，那么请只允许 <code>OPTIONS, HEAD, GET</code> 方法，并且不要支持sessions或者cookies!<br>他们是攻击者的主要目标。</p>
<p>一种推荐的做法是总是删除来自跨域请求的cookies在你处理来自这些请求的任何业务逻辑之前。<br>另外一种是检验header中的带的 <code>referrer</code> 。</p>
<h3 id="不要兼容旧浏览器">不要兼容旧浏览器</h3><p>但是请记住，CSRF在CORS实现之前就有。<br>并且对于不支持CORS的浏览器来说，这是一个大问题。<br>就我所知道的，这意味着IE10以前的所有浏览器。</p>
<p>因此，你可以不支持那些旧的浏览器！<br>这意味着查看那些特别的 <code>user-agent</code> 。<br>如果你只是不允许那些使用旧浏览器的用户登录或者存储任何个人信息，那也是可以的！</p>
<h3 id="CSRF_Tokens">CSRF Tokens</h3><p>最终的解决办法是使用CSRF tokens。<br>CSRF tokens是如何工作的呢？</p>
<ol>
<li>服务器发送给客户端一个token。</li>
<li>客户端提交的表单中带着这个token。</li>
<li>如果这个token不合法，那么服务器拒绝这个请求。</li>
</ol>
<p>因此，攻击者需要通过谋者办法获得一个合法的token来构造一个AJAX请求。<br>如果你允许了CORS，那么如果攻击者做起来就很简单，如果你暴露了token给客户端通过某种方式(显然你会把token发给客户端)。</p>
<p><strong>禁用 CORS!!!</strong><br>但是对于旧的浏览器，这相当简单，只要攻击者知道可以从哪里获取一个CSRF token。</p>
<p>这个token需要是不可猜测的，是它不会被攻击者尝试几次就猜出来。</p>
<p>最后一件事是不要创建一个类似 <code>/csrf</code> 之类的路由来获取token，那么攻击者就不会很容易获取一个CSRF token。</p>
<h2 id="BREACH攻击">BREACH攻击</h2><p>这也就是salt(加盐)出现的原因。<br>Breach攻击相当简单：如果服务器通过HTTPS+gzip多次发送相同或者相似的响应，攻击者就可以猜测响应的内容。解决办法？让每一个响应都有那么一点不同。<br>于是，CSRF tokens依据每一个不同的请求还有不同的时间来生成。<br>但是服务器需要知道客户端请求中带的token是否是合法的。<br>因此：</p>
<ol>
<li>一般认为安全加密的CSRF tokens是防护CSRF的关键</li>
<li>CSRF tokens现在通常是一个秘钥或者salt的hash</li>
</ol>
<p>了解更多:</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/BREACH_(security_exploit)" target="_blank" rel="external">BREACH</a></li>
<li><a href="http://en.wikipedia.org/wiki/CRIME" target="_blank" rel="external">CRIME</a></li>
<li><a href="https://community.qualys.com/blogs/securitylabs/2013/08/07/defending-against-the-breach-attack" target="_blank" rel="external">Defending against the BREACH Attack</a></li>
</ul>
<h2 id="salt不需要加密">salt不需要加密</h2><p><strong>因为客户端知道salt!!!</strong><br>服务器会发送 <code>&lt;salt&gt;;&lt;token&gt;</code> ，然后客户端会通过请求返回相同的值给服务器。服务器然后会检验 <code>&lt;secret&gt;+&lt;salt&gt;=&lt;token&gt;</code> 。<br>salt必须跟token一起被发送给服务器，否则服务器不能验证这个token。<br>这是最简单的加密方式。<br>还有很多方法，不过他们更加复杂，犯不着那么麻烦。</p>
<h2 id="创建tokens必须要快">创建tokens必须要快</h2><p><strong>因为每当进来一个请求他们就会被创建!</strong><br>一些人希望salt通过 <code>crypto.randomBytes()</code> 来创建。<br>这个方法的问题在于，服务器会消耗很多资源，那么，响应速度就会不必要的变慢。<br>因此，一些人建议用 <code>crypto.pseudRandomBytes()</code> ,但是这也同样会导致不必要的变慢。</p>
<blockquote>
<p>注意: 在最新版本的io.js中不再有这个问题</p>
</blockquote>
<p>因此，类似 <code>Math.random().toString(36).slice(2)</code> 这种简单操作是相当高效的。</p>
<h2 id="秘钥不需要是加密的，但需要是安全的">秘钥不需要是加密的，但需要是安全的</h2><p>如果你正在使用一个数据库后端来存储session，客户端是不会知道秘钥的，因为它被存储在数据库中。<br>如果你正在使用cookie来存储session，那么秘钥就会被存储在cookie中发送给客户端。<br>因此， <strong>确保cookie sessions 使用 <code>httpOnly</code> 那样客户端就不能通过客户端JavaScript来读取到秘钥!</strong></p>
<p>即使攻击者可以通过某种手段获取到<code>secret</code>，他也必须要通过CORS请求。</p>
<h2 id="CSRF攻击只和浏览器有关">CSRF攻击只和浏览器有关</h2><p>如果你正在使用浏览器的开发工具或者其他一般人不会使用到的工具，那你的担心是没有道理的。<br>使用不同的工具有很多种攻击网站的办法，但是CSRF的主要关注点是阻止那些对于不懂技术又使用旧浏览器的使用者的攻击。对于CSRF tokens的一个主要假设是，攻击者不会接触到的受害者的电脑，否则他有比CSRF更好的办法去攻击受害者的电脑。</p>
<h2 id="CSRF_tokens最终会变得不是那么必要">CSRF tokens最终会变得不是那么必要</h2><p>随着现代浏览器支持CORS以及安全策略，CSRF tokens最终会消失。<br>不用太担心CSRF tokens。<br>对于现在来说，禁止IE9及其以下的浏览器存储你网站的机密信息。<br>但是为了安全起见，你还是应该尽量允许他们尤其是当难以实现的时候。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原文出处<a href="https://github.com/pillarjs/understanding-csrf" target="_blank" rel="external">Understanding CSRF</a></p>
</blo]]>
    </summary>
    
      <category term="CSRF" scheme="http://halfcrazy.me/tags/CSRF/"/>
    
      <category term="安全" scheme="http://halfcrazy.me/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="译文" scheme="http://halfcrazy.me/categories/%E8%AF%91%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[bower install提示github connection timeout解决办法]]></title>
    <link href="http://halfcrazy.me/2014/12/09/bower-install%E8%B6%85%E6%97%B6/"/>
    <id>http://halfcrazy.me/2014/12/09/bower-install超时/</id>
    <published>2014-12-09T11:39:39.000Z</published>
    <updated>2014-12-09T11:57:53.000Z</updated>
    <content type="html"><![CDATA[<p>在执行<code>bower install</code>指令时，出现提示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Additional error details:</span><br><span class="line">fatal: unable to connect to github.com</span><br><span class="line">github.com[<span class="number">0</span>: <span class="number">192.30</span>.<span class="number">252.131</span>]: errno=Connection timed out</span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/angular/angular-phonecat/issues/141" target="_blank" rel="external">网上的说法</a>是由于bower默认采用<em>git://</em>协议，而当<em>git://</em>协议被屏蔽时就会出现这个错误，此时只需将默认<em>git://</em>协议换成<em>https://</em>就行了。在shell中执行如下指令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global url.<span class="string">"https://"</span>.insteadOf git://</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>在执行<code>bower install</code>指令时，出现提示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br]]>
    </summary>
    
      <category term="bower" scheme="http://halfcrazy.me/tags/bower/"/>
    
      <category term="前端" scheme="http://halfcrazy.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="前端" scheme="http://halfcrazy.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用gulp]]></title>
    <link href="http://halfcrazy.me/2014/11/22/%E4%BD%BF%E7%94%A8gulp/"/>
    <id>http://halfcrazy.me/2014/11/22/使用gulp/</id>
    <published>2014-11-22T11:37:46.000Z</published>
    <updated>2014-12-09T11:58:10.000Z</updated>
    <content type="html"><![CDATA[<p>在前端开发中经常会遇到一些粗活，比如说压缩、合并、混淆等等。这些粗活大多千篇一律，属于重复劳动，然而却又是无法避免的。为此前端自动化工具因此而生。常用的前端自动化工具有<a href="http://gruntjs.com" target="_blank" rel="external">grunt</a>，<a href="http://gulpjs.com" target="_blank" rel="external">gulp</a>。鉴于<a href="http://gruntjs.com" target="_blank" rel="external">grunt</a>的配置相对<a href="http://gulpjs.com" target="_blank" rel="external">gulp</a>略繁琐，本着能偷懒就偷懒的原则，我选择了使用<a href="http://gulpjs.com" target="_blank" rel="external">gulp</a>。</p>
<h3 id="什么是gulp">什么是gulp</h3><p><a href="http://gulpjs.com" target="_blank" rel="external">gulp</a>官网上的解释是 The streaming build system.（流构建系统）</p>
<h3 id="Getting_Started">Getting Started</h3><ol>
<li><p>安装gulp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --global gulp</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装gulp到你的项目依赖中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install gulp --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>在你的项目根目录中创建gulpfile.js文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch gulpfile.js</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>并写入一下内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// place code for your default task here</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<ol>
<li>运行gulp<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gulp</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意，默认执行<code>gulp</code>命令会调用default这个任务，由于我们上面的default任务中没有内容。所以此时gulp不会执行操作。如果想执行指定任务可以使用命令<code>gulp &lt;task&gt; &lt;othertask&gt;</code></p>
<h3 id="日常的一个小例子">日常的一个小例子</h3><p>我们的开发目录结构如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-src</span><br><span class="line"> -scripts</span><br><span class="line">  -a.js</span><br><span class="line">  -b.js</span><br><span class="line"> -styles</span><br><span class="line">  -a.css</span><br><span class="line">  -b.css</span><br></pre></td></tr></table></figure></p>
<p>现有需求如下</p>
<ol>
<li>将scripts中的js文件压缩合并为main.js并添加后缀.min后放到发布目录dest/script中</li>
<li>将style中的css文件压缩并添加后缀.min后放到发布目录dest/style中</li>
<li>监视文件变化，自动执行1,2中的操作</li>
</ol>
<p>根据需求可以写出如下gulpfile.js文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">	autoprefixer = <span class="built_in">require</span>(<span class="string">'gulp-autoprefixer'</span>),</span><br><span class="line">	minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</span><br><span class="line">	rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</span><br><span class="line">	concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),</span><br><span class="line">	uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'process-styles'</span>,<span class="string">'process-scripts'</span>,<span class="string">'watch'</span>]);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'process-styles'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> gulp.src(<span class="string">'src/styles/*.css'</span>)</span><br><span class="line">		 .pipe(autoprefixer(<span class="string">'last 2 version'</span>))</span><br><span class="line">		 .pipe(gulp.dest(<span class="string">'dest/styles/'</span>))</span><br><span class="line">		 .pipe(rename(&#123;suffix: <span class="string">'.min'</span>&#125; ))</span><br><span class="line">		 .pipe(minifycss())</span><br><span class="line">		 .pipe(gulp.dest(<span class="string">'dest/styles/'</span>));</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'process-scripts'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> gulp.src(<span class="string">'src/scripts/*.js'</span>)</span><br><span class="line">        .pipe(concat(<span class="string">'main.js'</span>))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dest/scripts/'</span>))</span><br><span class="line">        .pipe(rename(&#123;suffix: <span class="string">'.min'</span>&#125;))</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'dest/scripts/'</span>));</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  gulp.watch(<span class="string">'src/scripts/*.js'</span>, [<span class="string">'process-scripts'</span>]);</span><br><span class="line">  gulp.watch(<span class="string">'src/styles/*.css'</span>, [<span class="string">'process-styles'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>在前端开发中经常会遇到一些粗活，比如说压缩、合并、混淆等等。这些粗活大多千篇一律，属于重复劳动，然而却又是无法避免的。为此前端自动化工具因此而生。常用的前端自动化工具有<a href="http://gruntjs.com" target="_blank" rel="ext]]>
    </summary>
    
      <category term="gulp" scheme="http://halfcrazy.me/tags/gulp/"/>
    
      <category term="前端" scheme="http://halfcrazy.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="自动化" scheme="http://halfcrazy.me/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
      <category term="前端" scheme="http://halfcrazy.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[杀死团队的武器与修复团队的方法]]></title>
    <link href="http://halfcrazy.me/2014/04/05/%E6%9D%80%E6%AD%BB%E5%9B%A2%E9%98%9F%E7%9A%84%E6%AD%A6%E5%99%A8%E4%B8%8E%E4%BF%AE%E5%A4%8D%E5%9B%A2%E9%98%9F%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <id>http://halfcrazy.me/2014/04/05/杀死团队的武器与修复团队的方法/</id>
    <published>2014-04-05T11:31:39.000Z</published>
    <updated>2014-12-09T11:58:02.000Z</updated>
    <content type="html"><![CDATA[<p>不管在哪个行业，团队管理是永不过时的话题，每个人都希望工作在高效、融洽的团队中， 马尔科姆 格拉德威尔（Malcolm Gladwell）在他的畅销书《异类》中说：“没有人——不管是摇滚明星、专业运动员、软件业亿万富翁还是天才——能够独自奋战取得成功。”</p>
<p>但不是所有人都能这么幸运。曾有一篇文章提到《杀死团队的七种武器》，指出有七种方式足以让一个团队分崩离析：</p>
<ul>
<li>武器一：贸然加入陌生人</li>
<li>武器二：限制沟通</li>
<li>武器三：分清长幼尊卑</li>
<li>武器四：打人要打脸</li>
<li>武器五：限制信息的访问</li>
<li>武器六：一山之内放二虎</li>
<li>武器七：强制要求加班</li>
</ul>
<p>这七种武器每个都还有对应的进阶技巧，如果你想尽快毁掉自己的团队，不妨以此为参考。</p>
<p>不过，即使存在问题，也不是没有方法处理。Patrick Lencioni在自己的Five Dysfunction of a Team一书中提到六种方法来帮助不合的团队克服障碍：</p>
<ul>
<li>领导者必须发起关键性对话。</li>
<li>强调自我批评，停止指责他人。</li>
<li>提高交流及解决冲突和问题的技能。</li>
<li>营造共同的远景与目标。</li>
<li>为团队行为起草一份社会契约。</li>
<li>要认识到：分歧不应该破坏一个团队。</li>
</ul>
<p>他还在书中指出：</p>
<p>如果你能让公司团队中每一个人都同心协力，你将可以在任何时候、任何市场，战胜任何对手，并以此主导任何行业。</p>
<p>福布斯中文网的一篇文章《团队不合的成因与解决之道》对这六点有详细描述。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>不管在哪个行业，团队管理是永不过时的话题，每个人都希望工作在高效、融洽的团队中， 马尔科姆 格拉德威尔（Malcolm Gladwell）在他的畅销书《异类》中说：“没有人——不管是摇滚明星、专业运动员、软件业亿万富翁还是天才——能够独自奋战取得成功。”</p>
<p>但不]]>
    </summary>
    
      <category term="团队" scheme="http://halfcrazy.me/tags/%E5%9B%A2%E9%98%9F/"/>
    
      <category term="杂谈" scheme="http://halfcrazy.me/categories/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[小P变砖了]]></title>
    <link href="http://halfcrazy.me/2013/11/15/%E5%B0%8Fp%E5%8F%98%E7%A0%96%E4%BA%86/"/>
    <id>http://halfcrazy.me/2013/11/15/小p变砖了/</id>
    <published>2013-11-14T17:31:39.000Z</published>
    <updated>2014-12-09T11:58:17.000Z</updated>
    <content type="html"><![CDATA[<p>之前小P因为放在电脑包里内屏被移动硬盘给压碎了，走TB买了一块液晶屏，原装包邮106，广州发货第三天到我手上。到手以后搁着放了一天，第二天找对面PIT的兄弟给装了一下，结果发现屏的左下角还是碎的，不知道是发来就这样还是装的时候下手重了给按碎了，结果就是左下角那一块黑色的斑。要是我就此收手就好了，玩了一会发现右键手感不太对，似乎是下面的橡胶卡住了，于是又自己拆下来装了一遍，悲剧就此发生了，我的小P直接就屏幕点不亮了，开机过一会就自动断电。感觉多半是变砖了。</p>
<p>这个小P也算是跟随我多年，高中那会儿背着父母用自己攒的零花钱买的，PSP3000港版当时一共一套是1400，16G的黑棒。那时纯粹是为了<strong><em>MHP3</em></strong>买的，贴几张图</p>
<p><img src="http://farm4.staticflickr.com/3686/10855205255_658506f072.jpg" alt="优衣库UT系列的海报雷狼龙的"></p>
<p><img src="http://farm3.staticflickr.com/2865/10855205225_25ea190312.jpg" alt="卡通版"></p>
<h2 id="下面我仅存的几张截图，算是我MHP3的回忆吧">下面我仅存的几张截图，算是我MHP3的回忆吧</h2><p><img src="http://farm4.staticflickr.com/3794/10854881104_4e1eceba15.jpg" alt="村雷狼3分半"></p>
<p><img src="http://farm8.staticflickr.com/7441/10854881244_bd9f115820.jpg" alt="村雷狼3分半"></p>
<p><img src="http://farm4.staticflickr.com/3741/10854881454_3c1e34a8a4.jpg" alt="村雷狼3分半"></p>
<p>作为一个几百小时的猎人，其实对MH已经很有感情了，从最开始的一无所知，到后来的猫火雷狼，MH带给了我很多美好的回忆。</p>
<h3 id="谨以此文铭记我逝去的小P">谨以此文铭记我逝去的小P</h3>]]></content>
    <summary type="html">
    <![CDATA[<p>之前小P因为放在电脑包里内屏被移动硬盘给压碎了，走TB买了一块液晶屏，原装包邮106，广州发货第三天到我手上。到手以后搁着放了一天，第二天找对面PIT的兄弟给装了一下，结果发现屏的左下角还是碎的，不知道是发来就这样还是装的时候下手重了给按碎了，结果就是左下角那一块黑色的斑。]]>
    </summary>
    
      <category term="PSP" scheme="http://halfcrazy.me/tags/PSP/"/>
    
      <category term="怪物猎人" scheme="http://halfcrazy.me/tags/%E6%80%AA%E7%89%A9%E7%8C%8E%E4%BA%BA/"/>
    
      <category term="杂谈" scheme="http://halfcrazy.me/categories/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
</feed>